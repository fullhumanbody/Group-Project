<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-EN">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <head>
        <title>Hide 'n Show</title>
    </head>

    <body>

<style>


#pageTitle {
    text-align: center;
    text-decoration: underline;
}

#pageTitle, .page1, .page2, .page3, .page4, .page5 {
  display: none;
}



 

</style>

    <!------------------------------------------------------------------------------------------------------------------------------------>
        <button onclick="showpage()">Click me! I'll show you the next page!</button>

        <div class="page1"> <!-- Page 1 content ###################################################################################------------>

     <a href="buggame.html">
        <button>START! Catch some bugs!</button>
    </a>
    
<p>
    <a href="buggame.html">Bugs!</a>
    <a href="animal-highlight.html">Creature!</a>
    <a href="plant-growing.html">Plants!</a>
    <a href="flippingstones.html">Stones!</a>
    <a href="playground2 copy 2.html">Homework Folder</a>
</p>

        </div> <!-- End of Page 1 content #######################################################################################################-->
        <div class="page2">
<div id="lampWrapper">
    <img id="handLamp" src="lamp-temp-glow.png" />
</div>
<div class="banner"></div>
<div id="counter">Catch some bugs!</div>
        </div>
        <div class="page3">
            This is page 3 test test
        </div>
        <div class="page4">
            This is page 4 test test
        </div>
        <div class="page5">
            This is page 5 test test
        </div>





    <!------------------------------------------------------------------------------------------------------------------------------------>
    </body>




<script>


    var page1 = document.getElementsByClassName("page1");
    page1 = page1[0];
    var page2 = document.getElementsByClassName("page2");
    page2 = page2[0];
    var page3 = document.getElementsByClassName("page3");
    page3 = page3[0];
    var page4 = document.getElementsByClassName("page4");
    page4 = page4[0];
    var page5 = document.getElementsByClassName("page5");
    page5 = page5[0];
    console.log("showpage function called");


let playerReward = 0;
if (typeof playerReward !== 'undefined') {
    console.log("playerReward exists with value: " + playerReward);
} else {
    console.log("playerReward does not exist");
}



function showpage() {
    console.log("showpageTest function called");

        playerReward = playerReward + 1;
        console.log("playerReward is now: " + playerReward);
        if (playerReward === 1) {
            page1.style.display = "block";
            page2.style.display = "none";
            page3.style.display = "none";
            page4.style.display = "none";
            page5.style.display = "none";
            document.body.style.backgroundImage = "url('lamp-thegame.png')";
            document.body.style.backgroundRepeat = "no-repeat";
            document.body.style.backgroundSize = "cover";
            document.body.style.backgroundAttachment = "fixed";
        } else if (playerReward === 2) {
            page2.style.display = "block";
            page1.style.display = "none";

            //buggameOn = true;
           // buggameACTIVATE();


            document.body.style.backgroundImage = "url('night-glow.jpeg')";
            document.body.style.backgroundRepeat = "no-repeat";
            document.body.style.backgroundSize = "cover";
            document.body.style.backgroundAttachment = "fixed";
            document.getElementById("lampWrapper").style.position = "absolute";
            document.getElementById("lampWrapper").style.left = "200px";
            document.getElementById("lampWrapper").style.top = "200px";
            document.getElementById("lampWrapper").style.cursor = "grab";
            document.getElementById("handLamp").style.width = "100px";
            document.getElementById("handLamp").style.userSelect = "none";
            document.getElementById("handLamp").style.pointerEvents = "none";
            document.querySelector(".bug").style.width = "80px";
            document.getElementsByClassName("bug")[0].style.height = "80px";
            document.getElementsByClassName("bug")[0].style.backgroundImage = "url('bug.png')";
            document.getElementsByClassName("bug")[0].style.backgroundSize = "cover";
            document.getElementsByClassName("bug")[0].style.backgrounndPosition = "center";
            document.getElementsByClassName("bug")[0].style.backgroundRepeat = "no-repeat";
            document.getElementsByClassName("bug")[0].style.position = "absolute";
            document.getElementsByClassName("bug")[0].style.pointerEvents = "none";
        
        } else if (playerReward === 3) {
            bugameOn = false;
            page3.style.display = "block";
            page2.style.display = "none";
        } else if (playerReward === 4) {
            page4.style.display = "block";
            page3.style.display = "none";
        } else if (playerReward === 5) {
            page4.style.display = "none";
            page5.style.display = "block";
        } else {
            console.log("No valid reward");
        }

}




// Bug Game Code Below #####################################################################################################
let buggameOn = false;


//setInterval(function () { 
//  if(buggameOn === true){
//    console.log("Bug game is ON");
//    buggameACTIVATE();
//    buggameOn = false; // prevent re-initialization
//  } else {
//    console.log("Bug game is inactive");
//    }
//}, 1000); // check every second

//function buggameACTIVATE() {
  //  console.log("Bug game activated");

//if (buggameOn === true) {
    console.log("Initializing Bug Game Code");

let bugsZapped = 0;
let maxZaps = 30;
let spawnInterval;  // store interval so we can stop spawning bugs

window.onload = function () {

  function createBug() {
    const bug = document.createElement("div");
    bug.className = "bug";         
    document.body.appendChild(bug);

    const bodyWidth = window.innerWidth;
    const bodyHeight = window.innerHeight;

    let posX = Math.random() * (bodyWidth - 80);
    let posY = Math.random() * (bodyHeight - 80);

    let speed = 4;
    let angle = Math.random() * Math.PI * 2;
    let velX = Math.cos(angle) * speed;
    let velY = Math.sin(angle) * speed;

    function moveBug() {
      posX += velX;
      posY += velY;

      if (posX <= 0 || posX >= bodyWidth - 80) velX *= -1;
      if (posY <= 0 || posY >= bodyHeight - 80) velY *= -1;

      velX += (Math.random() - 0.5) * 0.4;
      velY += (Math.random() - 0.5) * 0.4;
      velX = Math.max(Math.min(velX, 5), -5);
      velY = Math.max(Math.min(velY, 5), -5);

      bug.style.left = posX + "px";
      bug.style.top = posY + "px";

      const lamp = document.getElementById("lampWrapper");

      
      // zap counter
   
   if (isColliding(bug, lamp)) {
  bug.remove();

  bugsZapped++;
  document.getElementById("counter").textContent = "Bugs caught: " + bugsZapped;

  if (bugsZapped >= maxZaps) {
    endGame();
  }

        return;
      }

      requestAnimationFrame(moveBug);
    }

    moveBug();
  }

  function isColliding(a, b) {
    const r1 = a.getBoundingClientRect();
    const r2 = b.getBoundingClientRect();

    return !(r1.right < r2.left ||
             r1.left > r2.right ||
             r1.bottom < r2.top ||
             r1.top > r2.bottom);
  }

  // spawn 5 bugs at the start
  for (let i = 0; i < 5; i++) {
    createBug();
  }

  // spawn bugs continuously
  spawnInterval = setInterval(createBug, 1000);

};



// the lamp code
$(function () {
  let isDragging = false;
  let offsetX, offsetY;

  $("#lampWrapper").on("mousedown", function (e) {
    isDragging = true;
    offsetX = e.clientX - $(this).position().left;
    offsetY = e.clientY - $(this).position().top;
    $(this).css("cursor", "grabbing");
  });

  $(document).on("mousemove", function (e) {
    if (isDragging) {
      $("#lampWrapper").css({
        left: e.clientX - offsetX,
        top: e.clientY - offsetY
      });
    }
  });

  $(document).on("mouseup", function () {
    isDragging = false;
    $("#lampWrapper").css("cursor", "grab");
  });
});

//}
console.log("Bug game code ended");
//}

</script>


</html>


